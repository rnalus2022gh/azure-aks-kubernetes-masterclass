# Create RG
az group create --name aks-rg1 --location southeastasia

 cd /d/azure-aks-kubernetes-masterclass/

# Create AKS cluster
az deployment group create --resource-group aks-rg1 --template-file <path-to-template> --parameters <path-to-parameters>
az deployment group create --resource-group aks-rg1 --template-file template/template.json --parameters template/parameters.json
az aks show -n aksdemo1 -g aks-rg1

# get AKS credentials / authentication
az aks get-credentials --resource-group aks-rg1 --name aksdemo1

# Get the resource group name of the AKS cluster 
az aks show --resource-group aks-rg1 --name aksdemo1 --query nodeResourceGroup -o tsv
MC_aks-rg1_aksdemo1_southeastasia

# REPLACE - Create Public IP: Replace Resource Group value
az network public-ip create --resource-group MC_aks-rg1_aksdemo1_southeastasia --name myAKSPublicIPForIngress --sku Standard --allocation-method static --query publicIp.ipAddress -o tsv
13.76.210.86 Oct15
52.163.71.159

# Show IP ipAddress
az network public-ip show --name myAKSPublicIPForIngress --resource-group MC_aks-rg1_aksdemo1_southeastasia --query ipAddress

az network public-ip list --query "[1].{Name:name,IP:ipAddress}"

How to use Azure Resource Manager (ARM) deployment templates with Azure CLI
https://docs.microsoft.com/en-us/azure/azure-resource-manager/templates/deploy-cli

Tutorial: Use parameter files to deploy your ARM template
https://docs.microsoft.com/en-us/azure/azure-resource-manager/templates/template-tutorial-use-parameter-file?tabs=azure-cli

Deploy resources with ARM templates and Azure PowerShell
https://docs.microsoft.com/en-us/azure/azure-resource-manager/templates/deploy-powershell

Effective ways to delete resources in a resource group on Azure in 2021
https://www.codeisahighway.com/effective-ways-to-delete-resources-in-a-resource-group-on-azure-in-2021/

https://docs.microsoft.com/en-us/cli/azure/group?view=azure-cli-latest#az_group_delete

az group delete --name 
                [--force-deletion-types]
                [--no-wait]
                [--subscription]
                [--yes]

https://docs.microsoft.com/en-us/cli/azure/network/vnet?view=azure-cli-latest#az_network_vnet_delete
az network vnet delete [--ids]
                       [--name]
                       [--resource-group]
                       [--subscription]

# Delete VNet
az network vnet delete --name aks-rg1-vnet --resource-group aks-rg1

# Delete AKS cluster
az aks delete --name aksdemo1 --resource-group aks-rg1 --yes

# Delete a RG
az group delete --name aks-rg1 --yes
az group delete --name NetworkWatcherRG --yes
az group delete --name DefaultResourceGroup-SEA --yes

https://docs.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest
az account list

Section 7 Azure MySQL Database
------------------------------
Deploy using template
az deployment group create --resource-group aks-rg1 --template-file template/dbtemplate.json --parameters template/dbparameters.json

https://www.base64encode.org/
Y3VyNUBOSUE=


# Rome - Delete Azure MySQL
az mysql server delete --name akswebappdbrome --resource-group aks-rg1 --yes

# Output of echo -n 'cur5@NIA' | base64
  db-password: Y3VyNUBOSUE=

Chapter12
-----------
# Rome - Create MSI using template
az deployment group create --resource-group aks-rg1 --template-file template/msitemplate.json --parameters template/msiparameters.json

# Verify ExternalDNS Logs
kubectl logs -f $(kubectl get po | egrep -o 'external-dns[A-Za-z0-9-]+')

# Replace DNS Zones Resource Group and yourdomain
az network dns record-set a list -g dns-zones -z thecure.fun 

